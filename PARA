local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

local running = false
local originalPosition = humanoidRootPart.CFrame
local teleported = false
local TARGET_PIVOT = Vector3.new(356.3396, 15.9205265, -92.1027985)

local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0,250,0,130)
frame.Position = UDim2.new(0.5,-125,0.5,-65)
frame.BackgroundColor3 = Color3.fromRGB(45,35,30) -- Kahverengi ton
frame.BorderSizePixel = 0
frame.ClipsDescendants = true

local UICornerFrame = Instance.new("UICorner", frame)
UICornerFrame.CornerRadius = UDim.new(0,12)

local UIStroke = Instance.new("UIStroke", frame)
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(90,60,40) -- Kahverengi çerçeve
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,35)
title.Position = UDim2.new(0,0,0,0) -- Frame içine tam oturması için
title.BackgroundColor3 = Color3.fromRGB(70,50,40)
title.BorderSizePixel = 0
title.TextColor3 = Color3.fromRGB(255,245,230)
title.Text = "Sydearr"
title.TextSize = 18
title.Font = Enum.Font.GothamBold
title.ClipsDescendants = true -- Taşmaları engeller

local titleCorner = Instance.new("UICorner", title)
titleCorner.CornerRadius = UDim.new(0,12)

local statusLabel = Instance.new("TextLabel", frame)
statusLabel.Size = UDim2.new(1,-20,0,30)
statusLabel.Position = UDim2.new(0,10,0,50)
statusLabel.BackgroundTransparency = 1
statusLabel.TextColor3 = Color3.fromRGB(255,200,150)
statusLabel.Text = "Durum: Durduruldu"
statusLabel.TextSize = 15
statusLabel.Font = Enum.Font.Gotham

local startButton = Instance.new("TextButton", frame)
startButton.Size = UDim2.new(0,100,0,35)
startButton.Position = UDim2.new(0.5,-50,1,-45)
startButton.BackgroundColor3 = Color3.fromRGB(210,130,70)
startButton.TextColor3 = Color3.fromRGB(25,25,25)
startButton.Text = "Başla"
startButton.TextSize = 16
startButton.Font = Enum.Font.GothamBold
startButton.BorderSizePixel = 0

local UICornerButton = Instance.new("UICorner", startButton)
UICornerButton.CornerRadius = UDim.new(0,8)

local UIS = game:GetService("UserInputService")
local dragging, dragInput, dragStart, startPos = false, nil, nil, nil

local function updateInput(input)
	local delta = input.Position - dragStart
	frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then dragging = false end
		end)
	end
end)

title.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		updateInput(input)
	end
end)

local function equipMop()
	local tool = player.Backpack:FindFirstChild("Paspas")
	if tool then
		tool.Parent = character
	end
end

local function getTargetModel()
	for _, model in pairs(workspace:GetDescendants()) do
		if model:IsA("Model") and (model.Name == "" or model.Name == " ") and model:FindFirstChild("HumanoidRootPart") then
			local pivot = model:GetPivot()
			if (pivot.Position - TARGET_PIVOT).Magnitude < 1 then
				return model
			end
		end
	end
	return nil
end

local function getAllKirliMeshParts()
	local parts = {}
	local folder = workspace:FindFirstChild("Kirliyerler")
	if folder then
		for _, v in pairs(folder:GetDescendants()) do
			if v:IsA("MeshPart") then
				table.insert(parts, v)
			end
		end
	end
	return parts
end

local function fireAllPromptsInModel(model)
	for _, obj in pairs(model:GetDescendants()) do
		if obj:IsA("ProximityPrompt") then
			fireproximityprompt(obj)
		end
	end
end

startButton.MouseButton1Click:Connect(function()
	running = not running
	if running then
		originalPosition = humanoidRootPart.CFrame
		teleported = false
		equipMop()
		startButton.Text = "Durdur"
		startButton.BackgroundColor3 = Color3.fromRGB(180,90,50)
		statusLabel.Text = "Durum: Aktif"
		statusLabel.TextColor3 = Color3.fromRGB(200,220,180)
	else
		startButton.Text = "Başla"
		startButton.BackgroundColor3 = Color3.fromRGB(210,130,70)
		statusLabel.Text = "Durum: Durduruldu"
		statusLabel.TextColor3 = Color3.fromRGB(255,200,150)
		humanoidRootPart.CFrame = originalPosition
	end
end)

task.spawn(function()
	while true do
		task.wait(0.1)
		if running then
			if not teleported then
				local targetModel = getTargetModel()
				if targetModel then
					local hrp = targetModel.HumanoidRootPart
					humanoidRootPart.CFrame = hrp.CFrame + hrp.CFrame.LookVector * 4
					task.wait(2)
					fireAllPromptsInModel(targetModel)
					task.wait(1)
					equipMop()
					teleported = true
				end
			else
				local list = getAllKirliMeshParts()
				for _, part in pairs(list) do
					local prompt = part:FindFirstChildOfClass("ProximityPrompt")
					if prompt then
						fireproximityprompt(prompt)
					end
				end
			end
		end
	end
end)
